!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["accessibility.cloud"]=t():e["accessibility.cloud"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){var n=t[e+"Localized"]||e;return(0,A.default)(n).replace(/^Rating /,"")}function s(e){return e===!0?E(h):e===!1?E(d):e}function c(e){var t=Math.floor(5*Math.min(1,Math.max(0,e))),n="★★★★★".slice(5-t);return'<span class="stars">'+n+'</span> <span class="numeric">'+t+"/5</span>"}function l(e){if($.isArray(e))return'<ul class="ac-list">'+e.map(function(e){return"<li>"+l(e)+"</li>"}).join("")+"</ul>";if($.isPlainObject(e)){var t=$.map(e,function(t,n){if(n.match(/Localized/))return"";var r=o(n,e);return $.isArray(t)||$.isPlainObject(t)?"areas"===n&&1===t.length?l(t[0]):"<li class=\"ac-group\"><header class='subtle'>"+r+"</header> "+l(t)+"</li>":n.startsWith("rating")?'<li class="ac-rating">'+r+": "+c(parseFloat(t))+"</li>":'<li class="ac-'+("undefined"==typeof t?"undefined":p(t))+'">'+r+": <span class='value'>"+s(t)+"</span></li>"});return'<ul class="ac-group">'+t.join("")+"</ul>"}return e}function u(e){return e.accessibility&&e.accessibility.accessibleWith&&e.accessibility.accessibleWith.wheelchair}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=a(["Yes"],["Yes"]),d=a(["No"],["No"]),y=a(["Accessible with wheelchair"],["Accessible with wheelchair"]),g=a(["Not accessible with wheelchair"],["Not accessible with wheelchair"]),v=a(["No results."],["No results."]),b=a(["Source"],["Source"]),m=a(["Unknown error."],["Unknown error."]),w=a(["Could not load data"],["Could not load data"]),k=n(6),x=r(k),j=n(5),A=r(j),_=n(3),P=n(1),E=_.t,S=function(){function e(t){i(this,e);var n={apiDomain:"https://www.accessibility.cloud",locale:"de_DE"},r=Object.assign(n,t);if(!r.apiDomain||!r.apiDomain.match(/^https?:\/\//))throw new Error("Please supply a valid API domain.");if(!r.locale||!r.locale.match(/[a-z]{2}(_[A-Z]{2})?/))throw new Error("Please supply a valid locale.");if(!r.token||"string"!=typeof r.token)throw new Error("Please supply a valid app or user token.");this.options=r,"undefined"!=typeof P.setGlobalLocale&&(0,P.setGlobalLocale)(this.getLocale())}return f(e,[{key:"getLocale",value:function(){return"de_DE"}},{key:"getPlacesAround",value:function(e,t){var n=function(){};return $.ajax({dataType:"json",url:this.options.apiDomain+"/place-infos?includeRelated=source&locale="+this.getLocale(),data:e,headers:{Accept:"application/json","X-Token":this.options.token}}).done(t||n).fail(t||n)}},{key:"resultsTemplate",value:function(){return'<ul class="ac-result-list" role="treegrid">       {{#places}}         {{#properties}}           <li class="ac-result {{isAccessibleClass}}" role="gridcell" aria-expanded="false">             <div class="ac-summary">               <img src="'+this.options.apiDomain+'/icons/categories/{{category}}.svg"\n                role="presentation"\n                class="ac-result-icon">               <header class="ac-result-name" role="heading">{{name}}</header>               <div class="ac-result-distance">{{formattedDistance}}</div>               <div class="ac-result-category">{{humanizedCategory}}</div>               {{{infoPageLink}}}               <div class="ac-result-accessibility-summary">{{accessibilitySummary}}</div>               <div class="ac-result-accessibility-details ac-hidden">{{{formattedAccessibility}}}</div>             </div>           </li>         {{/properties}}       {{/places}}     </ul>'}},{key:"renderPlaces",value:function(e,t,n){$(e).length&&(t&&t.length?($(e).html(x.default.render(this.resultsTemplate(),{places:t,humanizedCategory:function(){return(0,A.default)(this.localizedCategory||this.category)},formattedDistance:function(){return Math.round(this.distance)+"m"},formattedAccessibility:function(){return l(this.accessibility)},isAccessibleClass:function(){return u(this)?"is-accessible":""},accessibilitySummary:function(){return E(u(this)?y:g)},infoPageLink:function(){var e=n.sources&&n.sources[this.sourceId],t=e&&(e.shortName||e.name);return this.infoPageUrl&&t?'<a href="'+this.infoPageUrl+'" class="ac-result-link">'+t+"</a>":""}})),$("li.ac-result a").click(function(e){return e.stopPropagation()}),$("li.ac-result").click(function(e){return $(e.target).parent().find(".ac-result-accessibility-details").first().slideToggle()})):$(e).html('<div class="ac-no-results">'+E(v)+"</div>"))}},{key:"renderSourcesAndLicenses",value:function(e,t,n){var r=this,i=Object.keys(t).map(function(e){var i=t[e],a=n[i.licenseId],o=r.options.apiDomain+"/licenses/"+a._id,s=i.originWebsiteURL||r.options.apiDomain+"/sources/"+i._id;return'<a href="'+s+'">'+(i.shortName||i.name)+'</a>\n        (<a href="'+o+'">'+(a.shortName||a.name)+"</a>)"});i.length&&$(e).append('<p class="ac-licenses">'+E(b)+": "+i.join(", ")+"</p>")}},{key:"loadAndRenderPlaces",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){};return this.getPlacesAround(t).done(function(t){n.renderPlaces(e,t.features,t.related),n.renderSourcesAndLicenses(e,t.related.sources,t.related.licenses),r(null,t)}).fail(function(t){var n=E(m);try{n=JSON.parse(t.responseText).error.reason}catch(e){n=t.statusText+"<br>"+t.responseText}$(e).html('<div class="ac-error">'+E(w)+":"+n+"</div>"),r(new Error(n))})}}]),e}();t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new RegExp("^"+e+"_");return Object.keys(l.default).find(function(e){return e.match(t)})}function a(e,t){var n=t.replace(/_[A-Z][A-Z]$/),r=t!==n,a=r?t:i(t),o="en_US",s=l.default[t]||{},c=l.default[n]||{},u=l.default[a]||{},f=l.default[o]||{},p=s[e]||c[e]||u[e]||f[e]||e;return p}function o(e){u=e}function s(e){return a(e,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalLocale=o,t.t=s;var c=n(2),l=r(c),u="en_US"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={de:{},de_DE:{Yes:"Ja",No:"Nein","Accessible with wheelchair":"Rollstuhlgerecht","Not accessible with wheelchair":"Nicht rollstuhlgerecht","No results.":"Keine Ergebnisse.",Source:"Quelle","Unknown error.":"Unbekannter Fehler.","Could not load data":"Konnte Daten nicht laden."},en_US:{}};t.default=n},function(e,t){"use strict";function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&e.reduce?e.reduce(function(e,t,r){return e+t+(n[r]||"")},""):e}function r(){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&e.reduce?e.reduce(function(e,t,r){return e+t+(n[r]||"")},""):e}}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&e.reduce?e.reduce(function(e,t,r){return e+t+(n[r]||"")},""):e}function a(e){return e}function o(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.t=n,t.nt=r,t.msgid=i,t.gettext=a,t.ngettext=o},function(e,t){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t="undefined"==typeof t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e=r(e),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){var r,i,a;/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(n,o){"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(i=[t],r=o,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a)))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return y(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function a(e,t){return g.call(e,t)}function o(e){return!a(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return b[e]})}function c(t,n){function i(){if(v&&!b)for(;g.length;)delete d[g.pop()];else g=[];v=!1,b=!1}function a(e){if("string"==typeof e&&(e=e.split(w,2)),!y(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),c=new RegExp("\\s*"+r(e[1])),p=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,c,p,h=[],d=[],g=[],v=!1,b=!1;a(n||e.tags);for(var A,_,P,E,S,U,$=new f(t);!$.eos();){if(A=$.pos,P=$.scanUntil(s))for(var O=0,T=P.length;O<T;++O)E=P.charAt(O),o(E)?g.push(d.length):b=!0,d.push(["text",E,A,A+1]),A+=1,"\n"===E&&i();if(!$.scan(s))break;if(v=!0,_=$.scan(j)||"name",$.scan(m),"="===_?(P=$.scanUntil(k),$.scan(k),$.scanUntil(c)):"{"===_?(P=$.scanUntil(p),$.scan(x),$.scanUntil(c),_="&"):P=$.scanUntil(c),!$.scan(c))throw new Error("Unclosed tag at "+$.pos);if(S=[_,P,A,$.pos],d.push(S),"#"===_||"^"===_)h.push(S);else if("/"===_){if(U=h.pop(),!U)throw new Error('Unopened section "'+P+'" at '+A);if(U[1]!==P)throw new Error('Unclosed section "'+U[1]+'" at '+A)}else"name"===_||"{"===_||"&"===_?b=!0:"="===_&&a(P)}if(U=h.pop())throw new Error('Unclosed section "'+U[1]+'" at '+$.pos);return u(l(d))}function l(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function u(e){for(var t,n,r=[],i=r,a=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),a.push(t),i=t[4]=[];break;case"/":n=a.pop(),n[5]=t[2],i=a.length>0?a[a.length-1][4]:r;break;default:i.push(t)}return r}function f(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var d=Object.prototype.toString,y=Array.isArray||function(e){return"[object Array]"===d.call(e)},g=RegExp.prototype.test,v=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},m=/\s*/,w=/\s+/,k=/\s*=/,x=/\s*\}/,j=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var a,o,s=this,c=!1;s;){if(e.indexOf(".")>0)for(n=s.view,a=e.split("."),o=0;null!=n&&o<a.length;)o===a.length-1&&(c=i(n,a[o])),n=n[a[o++]];else n=s.view[e],c=i(s.view,e);if(c)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=c(e,t)),r},h.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof p?t:new p(t);return this.renderTokens(r,i,n,e)},h.prototype.renderTokens=function(e,t,n,r){for(var i,a,o,s="",c=0,l=e.length;c<l;++c)o=void 0,i=e[c],a=i[0],"#"===a?o=this.renderSection(i,t,n,r):"^"===a?o=this.renderInverted(i,t,n,r):">"===a?o=this.renderPartial(i,t,n,r):"&"===a?o=this.unescapedValue(i,t):"name"===a?o=this.escapedValue(i,t):"text"===a&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},h.prototype.renderSection=function(e,n,r,i){function a(e){return o.render(e,n,r)}var o=this,s="",c=n.lookup(e[1]);if(c){if(y(c))for(var l=0,u=c.length;l<u;++l)s+=this.renderTokens(e[4],n.push(c[l]),r,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],n.push(c),r,i);else if(t(c)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(e[3],e[5]),a),null!=c&&(s+=c)}else s+=this.renderTokens(e[4],n,r,i);return s}},h.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||y(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},h.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},h.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var A=new h;return e.clearCache=function(){return A.clearCache()},e.parse=function(e,t){return A.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(e,t,r)},e.to_html=function(n,r,i,a){var o=e.render(n,r,i);return t(a)?void a(o):o},e.escape=s,e.Scanner=f,e.Context=p,e.Writer=h,e})},function(e,t,n){e.exports=n(0)}])});